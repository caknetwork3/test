import{r as s,q as a,h as e,c as t,b as i,e as l,f as n,w as o,v as c,s as r,x as d,F as u,g as v,t as m,y as p,o as g,z as b,n as h,A as f,l as y,u as w,m as C,j as k}from"./vendor-BGoJhWpD.js";import{_ as U,u as A}from"./ui-Cyo600sM.js";const S={class:"user-management"},E={class:"management-header"},T={class:"header-actions"},D={class:"search-filter"},N={class:"users-table-container"},$={key:0,class:"no-users"},q={key:1,class:"users-table"},I={class:"cell user-cell"},x={class:"user-avatar"},_=["src","alt"],R={key:1,class:"avatar-placeholder"},V={class:"user-info"},O={class:"username"},B={class:"user-role"},j={class:"cell email-cell"},L={class:"email"},M={class:"cell coins-cell"},P={class:"coins-display"},z={class:"coins-amount"},G={class:"cell status-cell"},H={class:"status-badges"},J={key:0,class:"status-badge live"},K={class:"cell date-cell"},F={class:"date"},Z={class:"cell actions-cell"},Q={class:"action-buttons"},W=["onClick"],X=["onClick"],Y=["onClick"],ss={key:2,class:"pagination"},as=["disabled"],es={class:"pagination-info"},ts=["disabled"],is={class:"form-group"},ls={class:"form-group"},ns={class:"form-group"},os={class:"coins-management"},cs={class:"current-balance"},rs={class:"balance-display"},ds={class:"balance-amount"},us={class:"form-group"},vs={class:"quick-actions"},ms={__name:"UserManagement",setup(g){const b=A(),h=s(""),f=s(""),y=s(1),w=s(!1),C=s(!1),k=a({}),U=s(null),ms=s(0),ps=e(()=>{let s=b.getAllUsers();if(h.value){const a=h.value.toLowerCase();s=s.filter(s=>s.username.toLowerCase().includes(a)||s.email.toLowerCase().includes(a))}return f.value&&(s=s.filter(s=>s.role===f.value)),s}),gs=e(()=>Math.ceil(ps.value.length/10)),bs=e(()=>{const s=10*(y.value-1),a=s+10;return ps.value.slice(s,a)}),hs=()=>{window.showToast?.("Lista de usuarios actualizada","success")},fs=()=>{w.value=!1,Object.keys(k).forEach(s=>delete k[s])},ys=()=>{try{const s={username:k.username,email:k.email};k.newPassword&&(s.password=k.newPassword),b.updateUserCredentials(k.id,s),window.showToast?.("Usuario actualizado correctamente","success"),fs()}catch(s){window.showToast?.(s.message,"error")}},ws=()=>{C.value=!1,U.value=null,ms.value=0},Cs=s=>{ms.value=(U.value?.chococoins||0)+s},ks=()=>{try{b.updateUserBalance(U.value.id,ms.value),window.showToast?.(`Balance actualizado a ${ms.value} ChococCoins`,"success"),ws()}catch(s){window.showToast?.(s.message,"error")}};return(s,a)=>(i(),t("div",S,[l("div",E,[a[15]||(a[15]=l("h2",null,"👥 Gestión de Usuarios",-1)),l("div",T,[l("div",D,[o(l("input",{"onUpdate:modelValue":a[0]||(a[0]=s=>h.value=s),type:"text",placeholder:"Buscar usuarios...",class:"search-input"},null,512),[[c,h.value]]),o(l("select",{"onUpdate:modelValue":a[1]||(a[1]=s=>f.value=s),class:"filter-select"},a[14]||(a[14]=[l("option",{value:""},"Todos los roles",-1),l("option",{value:"streamer"},"Streamers",-1)]),512),[[r,f.value]])]),l("button",{onClick:hs,class:"btn btn-secondary btn-small"}," 🔄 Actualizar ")])]),l("div",N,[0===ps.value.length?(i(),t("div",$,a[16]||(a[16]=[l("div",{class:"no-users-icon"},"👤",-1),l("h3",null,"No se encontraron usuarios",-1),l("p",null,"No hay usuarios que coincidan con los filtros aplicados",-1)]))):(i(),t("div",q,[a[19]||(a[19]=d('<div class="table-header" data-v-95534d82><div class="header-cell" data-v-95534d82>Usuario</div><div class="header-cell" data-v-95534d82>Email</div><div class="header-cell" data-v-95534d82>ChococCoins</div><div class="header-cell" data-v-95534d82>Estado</div><div class="header-cell" data-v-95534d82>Fecha Registro</div><div class="header-cell" data-v-95534d82>Acciones</div></div>',1)),(i(!0),t(u,null,v(bs.value,s=>{return i(),t("div",{key:s.id,class:"table-row"},[l("div",I,[l("div",x,[s.profileImage?(i(),t("img",{key:0,src:s.profileImage,alt:s.username,class:"avatar-img"},null,8,_)):(i(),t("div",R,m(s.username.charAt(0).toUpperCase()),1))]),l("div",V,[l("div",O,m(s.username),1),l("div",B,m(s.role),1)])]),l("div",j,[l("span",L,m(s.email),1)]),l("div",M,[l("div",P,[a[17]||(a[17]=l("span",{class:"coins-icon"},"🍫",-1)),l("span",z,m(s.chococoins),1)])]),l("div",G,[l("div",H,[s.isStreaming?(i(),t("span",J," 🔴 En Vivo ")):n("",!0),a[18]||(a[18]=l("span",{class:"status-badge online"}," 🟢 Activo ",-1))])]),l("div",K,[l("span",F,m((e=s.createdAt,new Date(e).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}))),1)]),l("div",Z,[l("div",Q,[l("button",{onClick:a=>(s=>{Object.assign(k,{id:s.id,username:s.username,email:s.email,newPassword:""}),w.value=!0})(s),class:"action-btn edit-btn",title:"Editar usuario"}," ✏️ ",8,W),l("button",{onClick:a=>(s=>{U.value=s,ms.value=s.chococoins,C.value=!0})(s),class:"action-btn coins-btn",title:"Gestionar ChococCoins"}," 🍫 ",8,X),l("button",{onClick:a=>(s=>{if(confirm(`¿Estás seguro de que quieres eliminar al usuario "${s.username}"?`))try{b.deleteUser(s.id),window.showToast?.("Usuario eliminado correctamente","success")}catch(a){window.showToast?.(a.message,"error")}})(s),class:"action-btn delete-btn",title:"Eliminar usuario"}," 🗑️ ",8,Y)])])]);var e}),128))])),gs.value>1?(i(),t("div",ss,[l("button",{onClick:a[2]||(a[2]=s=>y.value--),disabled:1===y.value,class:"pagination-btn"}," ← Anterior ",8,as),l("span",es," Página "+m(y.value)+" de "+m(gs.value),1),l("button",{onClick:a[3]||(a[3]=s=>y.value++),disabled:y.value===gs.value,class:"pagination-btn"}," Siguiente → ",8,ts)])):n("",!0)]),w.value?(i(),t("div",{key:0,class:"modal-overlay",onClick:fs},[l("div",{class:"modal-content",onClick:a[7]||(a[7]=p(()=>{},["stop"]))},[l("div",{class:"modal-header"},[a[20]||(a[20]=l("h3",null,"✏️ Editar Usuario",-1)),l("button",{onClick:fs,class:"modal-close"},"✕")]),l("form",{onSubmit:p(ys,["prevent"]),class:"edit-form"},[l("div",is,[a[21]||(a[21]=l("label",{class:"form-label"},"Nombre de Usuario",-1)),o(l("input",{"onUpdate:modelValue":a[4]||(a[4]=s=>k.username=s),type:"text",class:"form-input",required:""},null,512),[[c,k.username]])]),l("div",ls,[a[22]||(a[22]=l("label",{class:"form-label"},"Email",-1)),o(l("input",{"onUpdate:modelValue":a[5]||(a[5]=s=>k.email=s),type:"email",class:"form-input",required:""},null,512),[[c,k.email]])]),l("div",ns,[a[23]||(a[23]=l("label",{class:"form-label"},"Nueva Contraseña (opcional)",-1)),o(l("input",{"onUpdate:modelValue":a[6]||(a[6]=s=>k.newPassword=s),type:"password",class:"form-input",placeholder:"Dejar vacío para mantener actual"},null,512),[[c,k.newPassword]])]),l("div",{class:"modal-actions"},[l("button",{type:"button",onClick:fs,class:"btn btn-secondary"}," Cancelar "),a[24]||(a[24]=l("button",{type:"submit",class:"btn btn-primary"}," Guardar Cambios ",-1))])],32)])])):n("",!0),C.value?(i(),t("div",{key:1,class:"modal-overlay",onClick:ws},[l("div",{class:"modal-content",onClick:a[13]||(a[13]=p(()=>{},["stop"]))},[l("div",{class:"modal-header"},[a[25]||(a[25]=l("h3",null,"🍫 Gestionar ChococCoins",-1)),l("button",{onClick:ws,class:"modal-close"},"✕")]),l("div",os,[l("div",cs,[a[27]||(a[27]=l("h4",null,"Balance Actual",-1)),l("div",rs,[a[26]||(a[26]=l("span",{class:"balance-icon"},"🍫",-1)),l("span",ds,m(U.value?.chococoins||0),1)])]),l("form",{onSubmit:p(ks,["prevent"]),class:"coins-form"},[l("div",us,[a[28]||(a[28]=l("label",{class:"form-label"},"Nuevo Balance",-1)),o(l("input",{"onUpdate:modelValue":a[8]||(a[8]=s=>ms.value=s),type:"number",min:"0",class:"form-input",required:""},null,512),[[c,ms.value,void 0,{number:!0}]])]),l("div",vs,[l("button",{type:"button",onClick:a[9]||(a[9]=s=>Cs(100)),class:"quick-btn add-btn"}," +100 "),l("button",{type:"button",onClick:a[10]||(a[10]=s=>Cs(500)),class:"quick-btn add-btn"}," +500 "),l("button",{type:"button",onClick:a[11]||(a[11]=s=>Cs(1e3)),class:"quick-btn add-btn"}," +1000 "),l("button",{type:"button",onClick:a[12]||(a[12]=s=>{return a=0,void(ms.value=a);var a}),class:"quick-btn reset-btn"}," Reset ")]),l("div",{class:"modal-actions"},[l("button",{type:"button",onClick:ws,class:"btn btn-secondary"}," Cancelar "),a[29]||(a[29]=l("button",{type:"submit",class:"btn btn-primary"}," Actualizar Balance ",-1))])],32)])])])):n("",!0)]))}},ps=U(ms,[["__scopeId","data-v-95534d82"]]),gs={class:"coin-management"},bs={class:"management-header"},hs={class:"header-stats"},fs={class:"stat-item"},ys={class:"stat-value"},ws={class:"stat-item"},Cs={class:"stat-value"},ks={class:"quick-actions-section"},Us={class:"quick-actions-grid"},As={class:"quick-action-card"},Ss={class:"action-form"},Es={class:"quick-action-card"},Ts={class:"action-form"},Ds={class:"quick-action-card"},Ns={class:"action-form"},$s={class:"quick-action-card"},qs={key:0,class:"stats-section"},Is={class:"stats-grid"},xs={class:"stat-card"},_s={class:"stat-content"},Rs={class:"stat-user"},Vs={class:"user-name"},Os={class:"user-coins"},Bs={class:"stat-card"},js={class:"stat-content"},Ls={class:"distribution-bars"},Ms={class:"distribution-item"},Ps={class:"progress-bar"},zs={class:"range-count"},Gs={class:"distribution-item"},Hs={class:"progress-bar"},Js={class:"range-count"},Ks={class:"distribution-item"},Fs={class:"progress-bar"},Zs={class:"range-count"},Qs={class:"stat-card"},Ws={class:"stat-content"},Xs={class:"recent-activity"},Ys={class:"activity-item"},sa={class:"activity-count"},aa={class:"activity-item"},ea={class:"activity-count"},ta={class:"users-coins-section"},ia={class:"section-header"},la={class:"search-sort"},na={class:"users-coins-grid"},oa={class:"user-card-header"},ca={class:"user-avatar"},ra=["src","alt"],da={key:1,class:"avatar-placeholder"},ua={class:"user-info"},va={class:"username"},ma={class:"user-role"},pa={class:"current-coins"},ga={class:"coins-amount"},ba={class:"coin-actions"},ha={class:"quick-amounts"},fa=["onClick"],ya=["onClick"],wa={class:"custom-amount"},Ca=["onUpdate:modelValue"],ka=["onClick"],Ua={class:"transaction-history"},Aa={class:"history-list"},Sa={class:"transaction-icon"},Ea={class:"transaction-details"},Ta={class:"transaction-description"},Da={class:"transaction-time"},Na=U({__name:"CoinManagement",setup(d){const p=A(),f=s(50),y=s(100),w=s(100),C=s(!1),k=s(""),U=s("coins-desc"),S=a({}),E=[10,50,100],T=s([]),D=e(()=>p.users.reduce((s,a)=>s+(a.chococoins||0),0)),N=e(()=>{const s=p.getAllUsers();return 0===s.length?0:Math.round(s.reduce((s,a)=>s+a.chococoins,0)/s.length)}),$=e(()=>p.getAllUsers().reduce((s,a)=>a.chococoins>(s?.chococoins||0)?a:s,null)),q=e(()=>p.users.filter(s=>"streamer"===s.role&&s.isStreaming).length),I=e(()=>{let s=p.getAllUsers();if(k.value){const a=k.value.toLowerCase();s=s.filter(s=>s.username.toLowerCase().includes(a))}return s}),x=e(()=>{const s=[...I.value];switch(U.value){case"coins-desc":return s.sort((s,a)=>a.chococoins-s.chococoins);case"coins-asc":return s.sort((s,a)=>s.chococoins-a.chococoins);case"name-asc":return s.sort((s,a)=>s.username.localeCompare(a.username));case"name-desc":return s.sort((s,a)=>a.username.localeCompare(s.username));default:return s}}),_=()=>{if(!f.value||f.value<=0)return void window.showToast?.("Ingresa una cantidad válida","error");const s=p.getAllUsers();s.forEach(s=>{p.updateUserBalance(s.id,s.chococoins+f.value)}),M("add",`Bonificación masiva de ${f.value} ChococCoins a ${s.length} usuarios`,f.value*s.length),window.showToast?.(`¡${f.value} ChococCoins otorgados a ${s.length} usuarios!`,"success")},R=()=>{if(!y.value||y.value<=0)return void window.showToast?.("Ingresa una cantidad válida","error");const s=p.users.filter(s=>"streamer"===s.role);s.forEach(s=>{p.updateUserBalance(s.id,s.chococoins+y.value)}),M("add",`Premio por streaming de ${y.value} ChococCoins a ${s.length} streamers`,y.value*s.length),window.showToast?.(`¡${y.value} ChococCoins otorgados a ${s.length} streamers!`,"success")},V=()=>{if(w.value<0)return void window.showToast?.("El balance mínimo no puede ser negativo","error");const s=p.getAllUsers();let a=0;s.forEach(s=>{s.chococoins<w.value&&(p.updateUserBalance(s.id,w.value),a++)}),a>0?(M("set",`Rebalanceo: ${a} usuarios ajustados al mínimo de ${w.value}`,0),window.showToast?.(`${a} usuarios rebalanceados`,"success")):window.showToast?.("Todos los usuarios ya tienen el balance mínimo","info")},O=(s,a)=>{const e=Math.max(0,s.chococoins+a);p.updateUserBalance(s.id,e);M(a>0?"add":"subtract",`${a>0?"Agregados":"Removidos"} ${Math.abs(a)} ChococCoins ${a>0?"a":"de"} ${s.username}`,Math.abs(a)),window.showToast?.(`${a>0?"+":""}${a} ChococCoins para ${s.username}`,"success")},B=(s,a)=>p.getAllUsers().filter(e=>e.chococoins>=s&&e.chococoins<=a).length,j=(s,a)=>{const e=p.getAllUsers();if(0===e.length)return 0;return B(s,a)/e.length*100},L=()=>{const s=(new Date).toDateString();return p.getAllUsers().filter(a=>new Date(a.createdAt).toDateString()===s).length},M=(s,a,e)=>{const t={id:Date.now(),type:s,description:a,amount:e,timestamp:(new Date).toISOString()};T.value.unshift(t),T.value.length>10&&(T.value=T.value.slice(0,10))};return g(()=>{p.getAllUsers().forEach(s=>{S[s.id]=s.chococoins}),M("add","Bonificación de bienvenida otorgada",100),M("set","Balance inicial establecido",50)}),(s,a)=>(i(),t("div",gs,[l("div",bs,[a[8]||(a[8]=l("h2",null,"🍫 Gestión de ChococCoins",-1)),l("div",hs,[l("div",fs,[a[6]||(a[6]=l("span",{class:"stat-label"},"Total en Circulación:",-1)),l("span",ys,m(D.value)+" ChococCoins",1)]),l("div",ws,[a[7]||(a[7]=l("span",{class:"stat-label"},"Promedio por Usuario:",-1)),l("span",Cs,m(N.value)+" ChococCoins",1)])])]),l("div",ks,[a[21]||(a[21]=l("h3",null,"⚡ Acciones Rápidas",-1)),l("div",Us,[l("div",As,[a[9]||(a[9]=l("div",{class:"action-icon"},"🎁",-1)),a[10]||(a[10]=l("h4",null,"Bonificación Masiva",-1)),a[11]||(a[11]=l("p",null,"Otorgar ChococCoins a todos los usuarios",-1)),l("div",Ss,[o(l("input",{"onUpdate:modelValue":a[0]||(a[0]=s=>f.value=s),type:"number",min:"1",placeholder:"Cantidad",class:"form-input"},null,512),[[c,f.value,void 0,{number:!0}]]),l("button",{onClick:_,class:"btn btn-primary btn-small"}," Otorgar a Todos ")])]),l("div",Es,[a[12]||(a[12]=l("div",{class:"action-icon"},"🏆",-1)),a[13]||(a[13]=l("h4",null,"Premio por Streaming",-1)),a[14]||(a[14]=l("p",null,"Recompensar a streamers activos",-1)),l("div",Ts,[o(l("input",{"onUpdate:modelValue":a[1]||(a[1]=s=>y.value=s),type:"number",min:"1",placeholder:"Cantidad",class:"form-input"},null,512),[[c,y.value,void 0,{number:!0}]]),l("button",{onClick:R,class:"btn btn-primary btn-small"}," Premiar Streamers ")])]),l("div",Ds,[a[15]||(a[15]=l("div",{class:"action-icon"},"🔄",-1)),a[16]||(a[16]=l("h4",null,"Rebalanceo",-1)),a[17]||(a[17]=l("p",null,"Establecer balance mínimo para todos",-1)),l("div",Ns,[o(l("input",{"onUpdate:modelValue":a[2]||(a[2]=s=>w.value=s),type:"number",min:"0",placeholder:"Balance mínimo",class:"form-input"},null,512),[[c,w.value,void 0,{number:!0}]]),l("button",{onClick:V,class:"btn btn-secondary btn-small"}," Rebalancear ")])]),l("div",$s,[a[18]||(a[18]=l("div",{class:"action-icon"},"📊",-1)),a[19]||(a[19]=l("h4",null,"Estadísticas",-1)),a[20]||(a[20]=l("p",null,"Ver distribución de ChococCoins",-1)),l("button",{onClick:a[3]||(a[3]=s=>C.value=!C.value),class:"btn btn-secondary btn-small"},m(C.value?"Ocultar":"Ver")+" Estadísticas ",1)])])]),C.value?(i(),t("div",qs,[a[30]||(a[30]=l("h3",null,"📊 Estadísticas Detalladas",-1)),l("div",Is,[l("div",xs,[a[22]||(a[22]=l("div",{class:"stat-header"},[l("span",{class:"stat-icon"},"👑"),l("span",{class:"stat-title"},"Usuario con Más Coins")],-1)),l("div",_s,[l("div",Rs,[l("span",Vs,m($.value?.username||"N/A"),1),l("span",Os,m($.value?.chococoins||0)+" 🍫",1)])])]),l("div",Bs,[a[26]||(a[26]=l("div",{class:"stat-header"},[l("span",{class:"stat-icon"},"📈"),l("span",{class:"stat-title"},"Distribución")],-1)),l("div",js,[l("div",Ls,[l("div",Ms,[a[23]||(a[23]=l("span",{class:"range-label"},"0-100",-1)),l("div",Ps,[l("div",{class:"progress-fill",style:b({width:`${j(0,100)}%`})},null,4)]),l("span",zs,m(B(0,100)),1)]),l("div",Gs,[a[24]||(a[24]=l("span",{class:"range-label"},"101-500",-1)),l("div",Hs,[l("div",{class:"progress-fill",style:b({width:`${j(101,500)}%`})},null,4)]),l("span",Js,m(B(101,500)),1)]),l("div",Ks,[a[25]||(a[25]=l("span",{class:"range-label"},"500+",-1)),l("div",Fs,[l("div",{class:"progress-fill",style:b({width:`${j(501,1/0)}%`})},null,4)]),l("span",Zs,m(B(501,1/0)),1)])])])]),l("div",Qs,[a[29]||(a[29]=l("div",{class:"stat-header"},[l("span",{class:"stat-icon"},"⏰"),l("span",{class:"stat-title"},"Actividad Reciente")],-1)),l("div",Ws,[l("div",Xs,[l("div",Ys,[a[27]||(a[27]=l("span",{class:"activity-text"},"Usuarios registrados hoy",-1)),l("span",sa,m(L()),1)]),l("div",aa,[a[28]||(a[28]=l("span",{class:"activity-text"},"Streamers activos",-1)),l("span",ea,m(q.value),1)])])])])])])):n("",!0),l("div",ta,[l("div",ia,[a[32]||(a[32]=l("h3",null,"👥 Gestión Individual",-1)),l("div",la,[o(l("input",{"onUpdate:modelValue":a[4]||(a[4]=s=>k.value=s),type:"text",placeholder:"Buscar usuario...",class:"search-input"},null,512),[[c,k.value]]),o(l("select",{"onUpdate:modelValue":a[5]||(a[5]=s=>U.value=s),class:"sort-select"},a[31]||(a[31]=[l("option",{value:"coins-desc"},"Más ChococCoins",-1),l("option",{value:"coins-asc"},"Menos ChococCoins",-1),l("option",{value:"name-asc"},"Nombre A-Z",-1),l("option",{value:"name-desc"},"Nombre Z-A",-1)]),512),[[r,U.value]])])]),l("div",na,[(i(!0),t(u,null,v(x.value,s=>(i(),t("div",{key:s.id,class:"user-coin-card"},[l("div",oa,[l("div",ca,[s.profileImage?(i(),t("img",{key:0,src:s.profileImage,alt:s.username,class:"avatar-img"},null,8,ra)):(i(),t("div",da,m(s.username.charAt(0).toUpperCase()),1))]),l("div",ua,[l("div",va,m(s.username),1),l("div",ma,m(s.role),1)]),l("div",pa,[a[33]||(a[33]=l("span",{class:"coins-icon"},"🍫",-1)),l("span",ga,m(s.chococoins),1)])]),l("div",ba,[l("div",ha,[(i(),t(u,null,v(E,a=>l("button",{key:a,onClick:e=>O(s,a),class:"quick-amount-btn add"}," +"+m(a),9,fa)),64)),(i(),t(u,null,v(E,a=>l("button",{key:`minus-${a}`,onClick:e=>O(s,-a),class:"quick-amount-btn subtract"}," -"+m(a),9,ya)),64))]),l("div",wa,[o(l("input",{"onUpdate:modelValue":a=>S[s.id]=a,type:"number",placeholder:"Cantidad personalizada",class:"custom-input"},null,8,Ca),[[c,S[s.id],void 0,{number:!0}]]),l("button",{onClick:a=>(s=>{const a=S[s.id];void 0===a||a<0?window.showToast?.("Ingresa una cantidad válida","error"):(p.updateUserBalance(s.id,a),M("set",`Balance de ${s.username} establecido en ${a} ChococCoins`,a),window.showToast?.(`Balance de ${s.username} establecido en ${a} ChococCoins`,"success"),S[s.id]=0)})(s),class:"btn btn-primary btn-small"}," Establecer ",8,ka)])])]))),128))])]),l("div",Ua,[a[34]||(a[34]=l("h3",null,"📋 Historial Reciente",-1)),l("div",Aa,[(i(!0),t(u,null,v(T.value,s=>{return i(),t("div",{key:s.id,class:"transaction-item"},[l("div",Sa,m("add"===s.type?"➕":"subtract"===s.type?"➖":"🔄"),1),l("div",Ea,[l("div",Ta,m(s.description),1),l("div",Da,m((a=s.timestamp,new Date(a).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}))),1)]),l("div",{class:h(["transaction-amount",s.type])},m("subtract"===s.type?"-":"+")+m(s.amount)+" 🍫 ",3)]);var a}),128))])])]))}},[["__scopeId","data-v-7744344e"]]),$a={class:"notification-sender"},qa={class:"notification-form-section"},Ia={class:"form-container"},xa={class:"form-row"},_a={class:"form-group"},Ra={class:"form-group"},Va={key:0,class:"form-group"},Oa={class:"users-selection"},Ba={class:"checkbox-label"},ja=["value"],La={class:"user-info"},Ma={class:"user-avatar"},Pa=["src","alt"],za={key:1,class:"avatar-placeholder"},Ga={class:"username"},Ha={class:"form-group"},Ja={class:"character-count"},Ka={class:"templates-section"},Fa={class:"templates-grid"},Za=["onClick"],Qa={class:"template-icon"},Wa={class:"template-name"},Xa={class:"preview-section"},Ya={class:"preview-icon"},se={class:"preview-content"},ae={class:"preview-message"},ee={class:"form-actions"},te=["disabled"],ie={key:0,class:"loading"},le={class:"stats-section"},ne={class:"stats-grid"},oe={class:"stat-card"},ce={class:"stat-content"},re={class:"stat-number"},de={class:"stat-card"},ue={class:"stat-content"},ve={class:"stat-number"},me={class:"stat-card"},pe={class:"stat-content"},ge={class:"stat-number"},be={class:"stat-card"},he={class:"stat-content"},fe={class:"stat-number"},ye={class:"history-section"},we={class:"history-list"},Ce={key:0,class:"no-history"},ke={class:"history-content"},Ue={class:"history-message"},Ae={class:"history-meta"},Se={class:"history-time"},Ee={class:"history-recipients"},Te={class:"history-actions"},De=["onClick"],Ne=["onClick"],$e=U({__name:"NotificationSender",setup(d){const b=A(),w=s(!1),C=s([]),k=s([]),U=a({type:"info",target:"all",message:""}),S=[{id:1,name:"Bienvenida",icon:"👋",type:"success",message:"¡Bienvenido a la comunidad CAK! Esperamos que disfrutes tu experiencia con nosotros."},{id:2,name:"Mantenimiento",icon:"🔧",type:"warning",message:"Realizaremos mantenimiento programado el próximo domingo de 2:00 AM a 4:00 AM. Disculpa las molestias."},{id:3,name:"Evento Especial",icon:"🎉",type:"info",message:"¡Evento especial este fin de semana! Únete a nuestros streamers para contenido exclusivo y premios."},{id:4,name:"Actualización",icon:"🆕",type:"info",message:"Nueva actualización disponible con mejoras y nuevas características. ¡Descúbrelas ahora!"},{id:5,name:"ChococCoins",icon:"🍫",type:"success",message:"¡Has recibido ChococCoins! Úsalos para interactuar más con tus streamers favoritos."},{id:6,name:"Stream Alert",icon:"🔴",type:"info",message:"¡Tu streamer favorito está en vivo! No te pierdas la acción."}],E=e(()=>b.getAllUsers()),T=e(()=>!!U.message.trim()&&("specific"!==U.target||0!==C.value.length)),D=e(()=>k.value.length),N=e(()=>k.value.reduce((s,a)=>"all"===a.targetUsers?s+b.getAllUsers().length:Array.isArray(a.targetUsers)?s+a.targetUsers.length:s,0)),$=e(()=>{const s=(new Date).toDateString();return k.value.filter(a=>new Date(a.timestamp).toDateString()===s).length}),q=e(()=>{if(0===k.value.length)return"Nunca";const s=k.value[0];return V(s.timestamp)}),I=s=>{const a={info:"ℹ️",success:"✅",warning:"⚠️",error:"❌"};return a[s]||a.info},x=async()=>{if(T.value){w.value=!0;try{let s="all";"streamers"===U.target?s=b.users.filter(s=>"streamer"===s.role).map(s=>s.id):"specific"===U.target&&(s=[...C.value]),b.addNotification({message:U.message,type:U.type,targetUsers:s});const a={id:Date.now(),message:U.message,type:U.type,targetUsers:s,timestamp:(new Date).toISOString()};k.value.unshift(a);const e="all"===s?b.getAllUsers().length:Array.isArray(s)?s.length:b.users.filter(s=>"streamer"===s.role).length;window.showToast?.(`Notificación enviada a ${e} usuario${1!==e?"s":""}`,"success"),_()}catch(s){window.showToast?.("Error al enviar la notificación","error")}finally{w.value=!1}}},_=()=>{U.type="info",U.target="all",U.message="",C.value=[]},R=()=>{confirm("¿Estás seguro de que quieres limpiar todo el historial?")&&(k.value=[],window.showToast?.("Historial limpiado","success"))},V=s=>{const a=new Date(s),e=new Date,t=Math.floor((e-a)/6e4);if(t<1)return"Ahora";if(t<60)return`Hace ${t} min`;if(t<1440){return`Hace ${Math.floor(t/60)}h`}return`Hace ${Math.floor(t/1440)}d`};return g(()=>{const s=localStorage.getItem("cak_notification_history");s&&(k.value=JSON.parse(s));const a=()=>{localStorage.setItem("cak_notification_history",JSON.stringify(k.value))},e=k.value.push,t=k.value.splice;k.value.push=function(...s){const t=e.apply(this,s);return a(),t},k.value.splice=function(...s){const e=t.apply(this,s);return a(),e}}),(s,a)=>(i(),t("div",$a,[a[25]||(a[25]=l("div",{class:"sender-header"},[l("h2",null,"🔔 Envío de Notificaciones"),l("p",null,"Envía notificaciones personalizadas a tus usuarios")],-1)),l("div",qa,[l("div",Ia,[l("form",{onSubmit:p(x,["prevent"]),class:"notification-form"},[l("div",xa,[l("div",_a,[a[5]||(a[5]=l("label",{class:"form-label"},"Tipo de Notificación",-1)),o(l("select",{"onUpdate:modelValue":a[0]||(a[0]=s=>U.type=s),class:"form-input"},a[4]||(a[4]=[l("option",{value:"info"},"📢 Información",-1),l("option",{value:"success"},"✅ Éxito",-1),l("option",{value:"warning"},"⚠️ Advertencia",-1),l("option",{value:"error"},"❌ Error",-1)]),512),[[r,U.type]])]),l("div",Ra,[a[7]||(a[7]=l("label",{class:"form-label"},"Destinatarios",-1)),o(l("select",{"onUpdate:modelValue":a[1]||(a[1]=s=>U.target=s),class:"form-input"},a[6]||(a[6]=[l("option",{value:"all"},"Todos los usuarios",-1),l("option",{value:"streamers"},"Solo streamers",-1),l("option",{value:"specific"},"Usuarios específicos",-1)]),512),[[r,U.target]])])]),"specific"===U.target?(i(),t("div",Va,[a[9]||(a[9]=l("label",{class:"form-label"},"Seleccionar Usuarios",-1)),l("div",Oa,[(i(!0),t(u,null,v(E.value,s=>(i(),t("div",{key:s.id,class:"user-checkbox"},[l("label",Ba,[o(l("input",{"onUpdate:modelValue":a[2]||(a[2]=s=>C.value=s),value:s.id,type:"checkbox"},null,8,ja),[[f,C.value]]),a[8]||(a[8]=l("span",{class:"checkmark"},null,-1)),l("div",La,[l("div",Ma,[s.profileImage?(i(),t("img",{key:0,src:s.profileImage,alt:s.username,class:"avatar-img"},null,8,Pa)):(i(),t("div",za,m(s.username.charAt(0).toUpperCase()),1))]),l("span",Ga,m(s.username),1)])])]))),128))])])):n("",!0),l("div",Ha,[a[10]||(a[10]=l("label",{class:"form-label"},"Mensaje",-1)),o(l("textarea",{"onUpdate:modelValue":a[3]||(a[3]=s=>U.message=s),class:"form-textarea",placeholder:"Escribe tu mensaje aquí...",rows:"4",required:""},null,512),[[c,U.message]]),l("div",Ja,m(U.message.length)+"/500 caracteres ",1)]),l("div",Ka,[a[11]||(a[11]=l("label",{class:"form-label"},"Plantillas Rápidas",-1)),l("div",Fa,[(i(),t(u,null,v(S,s=>l("button",{key:s.id,type:"button",onClick:a=>(s=>{U.type=s.type,U.message=s.message})(s),class:"template-btn"},[l("span",Qa,m(s.icon),1),l("span",Wa,m(s.name),1)],8,Za)),64))])]),l("div",Xa,[a[13]||(a[13]=l("label",{class:"form-label"},"Vista Previa",-1)),l("div",{class:h(["notification-preview",`preview-${U.type}`])},[l("div",Ya,m(I(U.type)),1),l("div",se,[l("div",ae,m(U.message||"Tu mensaje aparecerá aquí..."),1),a[12]||(a[12]=l("div",{class:"preview-time"},"Ahora",-1))])],2)]),l("div",ee,[l("button",{type:"button",onClick:_,class:"btn btn-secondary"}," Limpiar "),l("button",{type:"submit",disabled:!T.value,class:"btn btn-primary"},[w.value?(i(),t("span",ie)):n("",!0),y(" "+m(w.value?"Enviando...":"Enviar Notificación"),1)],8,te)])],32)])]),l("div",le,[a[22]||(a[22]=l("h3",null,"📊 Estadísticas de Envío",-1)),l("div",ne,[l("div",oe,[a[15]||(a[15]=l("div",{class:"stat-icon"},"📤",-1)),l("div",ce,[l("div",re,m(D.value),1),a[14]||(a[14]=l("div",{class:"stat-label"},"Notificaciones Enviadas",-1))])]),l("div",de,[a[17]||(a[17]=l("div",{class:"stat-icon"},"👥",-1)),l("div",ue,[l("div",ve,m(N.value),1),a[16]||(a[16]=l("div",{class:"stat-label"},"Usuarios Alcanzados",-1))])]),l("div",me,[a[19]||(a[19]=l("div",{class:"stat-icon"},"📈",-1)),l("div",pe,[l("div",ge,m($.value),1),a[18]||(a[18]=l("div",{class:"stat-label"},"Enviadas Hoy",-1))])]),l("div",be,[a[21]||(a[21]=l("div",{class:"stat-icon"},"⏰",-1)),l("div",he,[l("div",fe,m(q.value),1),a[20]||(a[20]=l("div",{class:"stat-label"},"Último Envío",-1))])])])]),l("div",ye,[l("div",{class:"history-header"},[a[23]||(a[23]=l("h3",null,"📋 Historial de Notificaciones",-1)),l("button",{onClick:R,class:"btn btn-secondary btn-small"}," 🗑️ Limpiar Historial ")]),l("div",we,[0===k.value.length?(i(),t("div",Ce,a[24]||(a[24]=[l("div",{class:"no-history-icon"},"📭",-1),l("p",null,"No hay notificaciones en el historial",-1)]))):n("",!0),(i(!0),t(u,null,v(k.value,s=>{return i(),t("div",{key:s.id,class:"history-item"},[l("div",{class:h(["history-icon",`icon-${s.type}`])},m(I(s.type)),3),l("div",ke,[l("div",Ue,m(s.message),1),l("div",Ae,[l("span",Se,m(V(s.timestamp)),1),l("span",Ee,m((a=s.targetUsers,"all"===a?"Todos los usuarios":Array.isArray(a)?`${a.length} usuario${1!==a.length?"s":""} específico${1!==a.length?"s":""}`:"Streamers")),1)])]),l("div",Te,[l("button",{onClick:a=>(s=>{U.type=s.type,U.message=s.message,"all"===s.targetUsers?U.target="all":Array.isArray(s.targetUsers)?(U.target="specific",C.value=[...s.targetUsers]):U.target="streamers",window.showToast?.("Notificación cargada para reenvío","info")})(s),class:"action-btn resend-btn",title:"Reenviar"}," 🔄 ",8,De),l("button",{onClick:a=>(s=>{const a=k.value.findIndex(a=>a.id===s);a>-1&&(k.value.splice(a,1),window.showToast?.("Notificación eliminada del historial","success"))})(s.id),class:"action-btn delete-btn",title:"Eliminar"}," 🗑️ ",8,Ne)])]);var a}),128))])])]))}},[["__scopeId","data-v-8cbf411a"]]),qe={class:"system-settings"},Ie={class:"settings-section"},xe={class:"settings-grid"},_e={class:"setting-card"},Re={class:"setting-control"},Ve={class:"setting-card"},Oe={class:"setting-control"},Be={class:"setting-card"},je={class:"setting-control"},Le={class:"setting-card"},Me={class:"setting-control"},Pe={class:"toggle-switch"},ze={class:"settings-section"},Ge={class:"settings-grid"},He={class:"setting-card"},Je={class:"setting-control"},Ke={class:"toggle-switch"},Fe={class:"setting-card"},Ze={class:"setting-control"},Qe={class:"toggle-switch"},We={class:"setting-card"},Xe={class:"setting-control"},Ye={class:"settings-section"},st={class:"data-management"},at={class:"data-card"},et={class:"data-header"},tt={class:"data-info"},it={class:"data-stats"},lt={class:"stat-item"},nt={class:"stat-value"},ot={class:"stat-item"},ct={class:"stat-value"},rt={class:"stat-item"},dt={class:"stat-value"},ut={class:"stat-item"},vt={class:"stat-value"},mt={class:"data-actions"},pt={class:"action-group"},gt={class:"action-buttons"},bt={class:"settings-section"},ht={class:"system-info"},ft={class:"info-grid"},yt={class:"info-item"},wt={class:"info-value"},Ct={class:"info-item"},kt={class:"info-value"},Ut={class:"info-item"},At={class:"info-value"},St={class:"info-item"},Et={class:"info-value"},Tt={class:"info-item"},Dt={class:"info-value"},Nt=U({__name:"SystemSettings",setup(n){const r=A(),d=s(null),u=a({platformName:"CAK Streamers",platformDescription:"La mejor plataforma para streamers de la agencia CAK",initialCoins:100,openRegistration:!0,autoNotifications:!0,streamAlerts:!0,notificationDuration:5}),v=e(()=>r.users.length),p=e(()=>r.users.filter(s=>"streamer"===s.role).length),b=e(()=>r.notifications.length),h=e(()=>{const s=JSON.stringify({users:r.users,notifications:r.notifications});return Math.round(new Blob([s]).size/1024)}),y=e(()=>(new Date).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})),w=e(()=>{const s=navigator.userAgent;return s.includes("Chrome")?"Chrome":s.includes("Firefox")?"Firefox":s.includes("Safari")?"Safari":s.includes("Edge")?"Edge":"Desconocido"}),C=e(()=>`${screen.width}x${screen.height}`),k=e(()=>Intl.DateTimeFormat().resolvedOptions().timeZone),U=e(()=>navigator.language||"es-ES"),S=()=>{try{localStorage.setItem("cak_system_settings",JSON.stringify(u)),window.showToast?.("Configuración guardada correctamente","success")}catch(s){window.showToast?.("Error al guardar la configuración","error")}},E=()=>{confirm("¿Estás seguro de que quieres restablecer la configuración?")&&(Object.assign(u,{platformName:"CAK Streamers",platformDescription:"La mejor plataforma para streamers de la agencia CAK",initialCoins:100,openRegistration:!0,autoNotifications:!0,streamAlerts:!0,notificationDuration:5}),window.showToast?.("Configuración restablecida","success"))},T=()=>{try{const s={users:r.users,notifications:r.notifications,settings:u,exportDate:(new Date).toISOString(),version:"1.0.0"},a=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),e=URL.createObjectURL(a),t=document.createElement("a");t.href=e,t.download=`cak-backup-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(e),window.showToast?.("Datos exportados correctamente","success")}catch(s){window.showToast?.("Error al exportar los datos","error")}},D=()=>{d.value?.click()},N=s=>{const a=s.target.files[0];if(!a)return;const e=new FileReader;e.onload=s=>{try{const a=JSON.parse(s.target.result);confirm("¿Estás seguro de que quieres importar estos datos? Esto sobrescribirá todos los datos actuales.")&&(a.users&&(r.users=a.users,r.saveUsers()),a.notifications&&(r.notifications=a.notifications,r.saveNotifications()),a.settings&&(Object.assign(u,a.settings),S()),window.showToast?.("Datos importados correctamente","success"))}catch(a){window.showToast?.("Error al importar los datos. Archivo inválido.","error")}},e.readAsText(a),s.target.value=""},$=()=>{"ELIMINAR TODO"===prompt('Esta acción eliminará TODOS los datos permanentemente.\nEscribe "ELIMINAR TODO" para confirmar:')&&(localStorage.clear(),r.users=[],r.notifications=[],r.createDefaultAdmin(),window.showToast?.("Todos los datos han sido eliminados","warning"),setTimeout(()=>{window.location.reload()},2e3))},q=()=>{confirm("¿Estás seguro de que quieres restaurar la configuración por defecto?")&&(localStorage.removeItem("cak_system_settings"),E(),window.showToast?.("Configuración restaurada a valores por defecto","success"))};return g(()=>{const s=localStorage.getItem("cak_system_settings");if(s)try{const a=JSON.parse(s);Object.assign(u,a)}catch(a){}}),(s,a)=>(i(),t("div",qe,[a[35]||(a[35]=l("div",{class:"settings-header"},[l("h2",null,"⚙️ Configuración del Sistema"),l("p",null,"Administra la configuración general de la plataforma")],-1)),l("div",Ie,[a[12]||(a[12]=l("h3",null,"🌐 Configuración General",-1)),l("div",xe,[l("div",_e,[a[7]||(a[7]=l("div",{class:"setting-header"},[l("div",{class:"setting-icon"},"🏷️"),l("div",{class:"setting-info"},[l("h4",null,"Nombre de la Plataforma"),l("p",null,"Nombre que aparece en toda la aplicación")])],-1)),l("div",Re,[o(l("input",{"onUpdate:modelValue":a[0]||(a[0]=s=>u.platformName=s),type:"text",class:"form-input",placeholder:"CAK Streamers"},null,512),[[c,u.platformName]])])]),l("div",Ve,[a[8]||(a[8]=l("div",{class:"setting-header"},[l("div",{class:"setting-icon"},"📝"),l("div",{class:"setting-info"},[l("h4",null,"Descripción"),l("p",null,"Descripción breve de la plataforma")])],-1)),l("div",Oe,[o(l("textarea",{"onUpdate:modelValue":a[1]||(a[1]=s=>u.platformDescription=s),class:"form-textarea",rows:"3",placeholder:"La mejor plataforma para streamers"},null,512),[[c,u.platformDescription]])])]),l("div",Be,[a[9]||(a[9]=l("div",{class:"setting-header"},[l("div",{class:"setting-icon"},"🍫"),l("div",{class:"setting-info"},[l("h4",null,"ChococCoins Iniciales"),l("p",null,"Cantidad que reciben los nuevos usuarios")])],-1)),l("div",je,[o(l("input",{"onUpdate:modelValue":a[2]||(a[2]=s=>u.initialCoins=s),type:"number",min:"0",class:"form-input"},null,512),[[c,u.initialCoins,void 0,{number:!0}]])])]),l("div",Le,[a[11]||(a[11]=l("div",{class:"setting-header"},[l("div",{class:"setting-icon"},"👥"),l("div",{class:"setting-info"},[l("h4",null,"Registro Abierto"),l("p",null,"Permitir que nuevos usuarios se registren")])],-1)),l("div",Me,[l("label",Pe,[o(l("input",{"onUpdate:modelValue":a[3]||(a[3]=s=>u.openRegistration=s),type:"checkbox"},null,512),[[f,u.openRegistration]]),a[10]||(a[10]=l("span",{class:"toggle-slider"},null,-1))])])])])]),l("div",ze,[a[18]||(a[18]=l("h3",null,"🔔 Configuración de Notificaciones",-1)),l("div",Ge,[l("div",He,[a[14]||(a[14]=l("div",{class:"setting-header"},[l("div",{class:"setting-icon"},"📢"),l("div",{class:"setting-info"},[l("h4",null,"Notificaciones Automáticas"),l("p",null,"Enviar notificaciones automáticas del sistema")])],-1)),l("div",Je,[l("label",Ke,[o(l("input",{"onUpdate:modelValue":a[4]||(a[4]=s=>u.autoNotifications=s),type:"checkbox"},null,512),[[f,u.autoNotifications]]),a[13]||(a[13]=l("span",{class:"toggle-slider"},null,-1))])])]),l("div",Fe,[a[16]||(a[16]=l("div",{class:"setting-header"},[l("div",{class:"setting-icon"},"🔴"),l("div",{class:"setting-info"},[l("h4",null,"Alertas de Stream"),l("p",null,"Notificar cuando streamers van en vivo")])],-1)),l("div",Ze,[l("label",Qe,[o(l("input",{"onUpdate:modelValue":a[5]||(a[5]=s=>u.streamAlerts=s),type:"checkbox"},null,512),[[f,u.streamAlerts]]),a[15]||(a[15]=l("span",{class:"toggle-slider"},null,-1))])])]),l("div",We,[a[17]||(a[17]=l("div",{class:"setting-header"},[l("div",{class:"setting-icon"},"⏰"),l("div",{class:"setting-info"},[l("h4",null,"Duración de Notificaciones"),l("p",null,"Tiempo en segundos antes de auto-ocultar")])],-1)),l("div",Xe,[o(l("input",{"onUpdate:modelValue":a[6]||(a[6]=s=>u.notificationDuration=s),type:"number",min:"1",max:"30",class:"form-input"},null,512),[[c,u.notificationDuration,void 0,{number:!0}]])])])])]),l("div",Ye,[a[27]||(a[27]=l("h3",null,"💾 Gestión de Datos",-1)),l("div",st,[l("div",at,[l("div",et,[a[24]||(a[24]=l("div",{class:"data-icon"},"📊",-1)),l("div",tt,[a[23]||(a[23]=l("h4",null,"Estadísticas del Sistema",-1)),l("div",it,[l("div",lt,[a[19]||(a[19]=l("span",{class:"stat-label"},"Usuarios:",-1)),l("span",nt,m(v.value),1)]),l("div",ot,[a[20]||(a[20]=l("span",{class:"stat-label"},"Streamers:",-1)),l("span",ct,m(p.value),1)]),l("div",rt,[a[21]||(a[21]=l("span",{class:"stat-label"},"Notificaciones:",-1)),l("span",dt,m(b.value),1)]),l("div",ut,[a[22]||(a[22]=l("span",{class:"stat-label"},"Almacenamiento:",-1)),l("span",vt,m(h.value)+" KB",1)])])])])]),l("div",mt,[l("div",pt,[a[25]||(a[25]=l("h4",null,"🔄 Respaldo y Restauración",-1)),l("div",gt,[l("button",{onClick:T,class:"btn btn-primary"}," 📤 Exportar Datos "),l("button",{onClick:D,class:"btn btn-secondary"}," 📥 Importar Datos "),l("input",{ref_key:"fileInput",ref:d,type:"file",accept:".json",onChange:N,style:{display:"none"}},null,544)])]),l("div",{class:"action-group danger-zone"},[a[26]||(a[26]=l("h4",null,"⚠️ Zona de Peligro",-1)),l("div",{class:"action-buttons"},[l("button",{onClick:$,class:"btn btn-danger"}," 🗑️ Limpiar Todos los Datos "),l("button",{onClick:q,class:"btn btn-warning"}," 🔄 Restaurar Configuración ")])])])])]),l("div",bt,[a[34]||(a[34]=l("h3",null,"ℹ️ Información del Sistema",-1)),l("div",ht,[l("div",ft,[a[33]||(a[33]=l("div",{class:"info-item"},[l("span",{class:"info-label"},"Versión:"),l("span",{class:"info-value"},"1.0.0")],-1)),l("div",yt,[a[28]||(a[28]=l("span",{class:"info-label"},"Última Actualización:",-1)),l("span",wt,m(y.value),1)]),l("div",Ct,[a[29]||(a[29]=l("span",{class:"info-label"},"Navegador:",-1)),l("span",kt,m(w.value),1)]),l("div",Ut,[a[30]||(a[30]=l("span",{class:"info-label"},"Resolución:",-1)),l("span",At,m(C.value),1)]),l("div",St,[a[31]||(a[31]=l("span",{class:"info-label"},"Zona Horaria:",-1)),l("span",Et,m(k.value),1)]),l("div",Tt,[a[32]||(a[32]=l("span",{class:"info-label"},"Idioma:",-1)),l("span",Dt,m(U.value),1)])])])]),l("div",{class:"settings-actions"},[l("button",{onClick:S,class:"btn btn-primary"}," 💾 Guardar Configuración "),l("button",{onClick:E,class:"btn btn-secondary"}," 🔄 Restablecer ")])]))}},[["__scopeId","data-v-ce7d83de"]]),$t={class:"admin-panel"},qt={class:"container"},It={class:"admin-header"},xt={class:"admin-info"},_t={class:"admin-name"},Rt={class:"admin-stats"},Vt={class:"stat-card"},Ot={class:"stat-content"},Bt={class:"stat-number"},jt={class:"stat-card"},Lt={class:"stat-content"},Mt={class:"stat-number"},Pt={class:"stat-card"},zt={class:"stat-content"},Gt={class:"stat-number"},Ht={class:"stat-card"},Jt={class:"stat-content"},Kt={class:"stat-number"},Ft={class:"admin-tabs"},Zt=["onClick"],Qt={class:"tab-icon"},Wt={class:"tab-label"},Xt={class:"tab-content"},Yt={key:0,class:"tab-panel"},si={key:1,class:"tab-panel"},ai={key:2,class:"tab-panel"},ei={key:3,class:"tab-panel"},ti=U({__name:"AdminPanel",setup(a){const o=w(),c=A(),r=s("users"),d=[{id:"users",label:"Usuarios",icon:"👥"},{id:"coins",label:"ChococCoins",icon:"🍫"},{id:"notifications",label:"Notificaciones",icon:"🔔"},{id:"settings",label:"Configuración",icon:"⚙️"}],p=e(()=>c.users.filter(s=>"admin"!==s.role).length),b=e(()=>c.users.filter(s=>"streamer"===s.role).length),f=e(()=>c.users.reduce((s,a)=>s+(a.chococoins||0),0)),y=e(()=>c.users.filter(s=>"streamer"===s.role&&s.isStreaming).length);return g(()=>{if(!c.isAdmin)return window.showToast?.("No tienes permisos de administrador","error"),void o.push("/");window.showToast?.("Bienvenido al panel de administración","success")}),(s,a)=>(i(),t("div",$t,[l("div",qt,[l("div",It,[a[1]||(a[1]=l("div",{class:"admin-title"},[l("h1",null,"⚙️ Panel de Administración"),l("p",null,"Gestiona usuarios, ChococCoins y notificaciones")],-1)),l("div",xt,[a[0]||(a[0]=l("div",{class:"admin-badge"},[l("span",{class:"badge-icon"},"👑"),l("span",{class:"badge-text"},"Administrador")],-1)),l("div",_t,m(C(c).user.username),1)])]),l("div",Rt,[l("div",Vt,[a[3]||(a[3]=l("div",{class:"stat-icon"},"👥",-1)),l("div",Ot,[l("div",Bt,m(p.value),1),a[2]||(a[2]=l("div",{class:"stat-label"},"Usuarios Totales",-1))])]),l("div",jt,[a[5]||(a[5]=l("div",{class:"stat-icon"},"🎮",-1)),l("div",Lt,[l("div",Mt,m(b.value),1),a[4]||(a[4]=l("div",{class:"stat-label"},"Streamers",-1))])]),l("div",Pt,[a[7]||(a[7]=l("div",{class:"stat-icon"},"🍫",-1)),l("div",zt,[l("div",Gt,m(f.value),1),a[6]||(a[6]=l("div",{class:"stat-label"},"ChococCoins Total",-1))])]),l("div",Ht,[a[9]||(a[9]=l("div",{class:"stat-icon"},"🔴",-1)),l("div",Jt,[l("div",Kt,m(y.value),1),a[8]||(a[8]=l("div",{class:"stat-label"},"En Vivo",-1))])])]),l("div",Ft,[(i(),t(u,null,v(d,s=>l("button",{key:s.id,onClick:a=>r.value=s.id,class:h(["tab-btn",{active:r.value===s.id}])},[l("span",Qt,m(s.icon),1),l("span",Wt,m(s.label),1)],10,Zt)),64))]),l("div",Xt,["users"===r.value?(i(),t("div",Yt,[k(ps)])):n("",!0),"coins"===r.value?(i(),t("div",si,[k(Na)])):n("",!0),"notifications"===r.value?(i(),t("div",ai,[k($e)])):n("",!0),"settings"===r.value?(i(),t("div",ei,[k(Nt)])):n("",!0)])])]))}},[["__scopeId","data-v-49d953bd"]]);export{ti as A};
